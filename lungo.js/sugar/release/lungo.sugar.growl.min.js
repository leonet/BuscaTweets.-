LUNGO.Sugar.Growl=function(e,k){var n=[],g={BODY:"body",GROWL:".growl",MODAL:".growl .modal",NOTIFY:".growl .notify",MODAL_HREF:".growl .modal a"},f={VISIBLE:"visible",SHOW:"show",WORKING:"working",INPUT:"input"},p=function(){o(g.MODAL);o(g.NOTIFY);setTimeout(function(){e.dom(g.GROWL).style("display","none")},300)},j=function(a){var b=e.dom(g.GROWL);b.style("display")==="none"&&b.show();a&&b.addClass("modal")},q=function(a){var b=e.dom(g.MODAL);b.removeClass(f.SHOW);b.removeClass(f.INPUT);a?b.addClass(f.WORKING):
b.removeClass(f.WORKING);return b},r=function(a){for(var b="",c=0,d=a.length;c<d;c++){b=b;var h="growl_option_"+c;h=h!==k?'id="'+h+'"':"";b=b+('<a href="#" '+h+' class="button '+a[c].color+'"><span class="icon '+a[c].icon+'"></span>'+a[c].name+"</a>")}return b},l=function(a,b){if(a!=k&&a!=0){if(b===k)b="LUNGO.Sugar.Growl.hide()";setTimeout(b,a*1E3)}},o=function(a){a=e.dom(a);a.hasClass(f.SHOW)&&a.removeClass(f.SHOW)};e.dom(g.BODY).append('<div class="growl"><div class="modal"></div><div class="notify"></div></div>');
(function(){e.dom(g.NOTIFY).bind("click",function(){e.dom(g.NOTIFY).removeClass(f.SHOW)});e.dom(".growl .modal.input a, .growl .modal .close").tap(function(a){if(e.dom(this).attr("id")){id=e.dom(this).attr("id").replace(/growl_option_/g,"");setTimeout(n[id].callback,100)}else{a.preventDefault();p();return false}})})();return{show:function(a,b,c,d,h,m){j(true);var i=q(d);i.html('<span class="icon '+c+'"></span><strong>'+a+"</strong><small>"+b+"</small>");setTimeout(function(){i.addClass(f.SHOW)},100);
l(h,m)},hide:p,notify:function(a,b,c,d,h,m){j(false);var i=e.dom(g.NOTIFY);d&&i.addClass(d);i.html('<span class="icon '+c+'"></span><strong>'+a+"</strong><br/><small>"+b+"</small>");setTimeout(function(){i.addClass(f.SHOW)},300);l(h,m)},option:function(a,b){j(true);n=b;var c=r(b),d=e.dom(g.MODAL);d.removeClass(f.WORKING).removeClass(f.SHOW);d.addClass("input").html("<strong>"+a+"</strong>"+c).show();setTimeout(function(){d.addClass("show")},100)},html:function(a,b,c){a+=b?'<span class="icon close"></span>':
"";j(true);var d=q(false);d.html(a).addClass("url");setTimeout(function(){d.addClass(f.SHOW)},100);l(0,c)}}}(LUNGO);
